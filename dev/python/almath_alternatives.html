<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Alternatives to ALMath’s python bindings &mdash; Aldebaran 2.8.7.4 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.8.7.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Aldebaran 2.8.7.4 documentation" href="../../index.html" />
    <link rel="up" title="Python SDK" href="index.html" />
    <link rel="next" title="C++ SDK" href="../cpp/index.html" />
    <link rel="prev" title="NAOqi Python - API" href="../../ref/python-api.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115894784-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115894784-6');
</script>

<script type="text/javascript" src="https://cloud.aldebaran-robotics.com/static/js/topbar.js"></script>
<style>
div#hd::after {
  
  
  content: 'NAOqi 2.8';
  
  
  
  position: absolute;
  margin-top: -54px;
  right: -4px;
  font-size: 125%;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  transform: rotate(45deg);
  }
</style>
<script>

$(window).ready(function () {

    //Aldebaran Top bar
     var barLinks = [];
     barLinks.push({'name':'Aldebaran Site', 'url':'http://www.aldebaran-robotics.com', 'click':'', 'img':'https://cloud.aldebaran-robotics.com/static/img/aldeb.png'});
     barLinks.push({'name':'Documentation', 'url':'../../index.html', 'click':"", 'img':''});
     function ShowBar(name, email, usertype) {
        var barParams = {
            'name'    : name,
            'email'   : email,
            'usertype': usertype,
            'loginfct': "FctLogin"
        }
        try { InitTopBar(barParams, barLinks); } catch (e) { console.log('Top Bar Init Failed'); }
    }
    ShowBar();

    var width_label = 0;
    $('dl.function-index dt > span').each(function () {
        $(this).css('width', 'auto');
        width_label = Math.max(width_label, $(this).width());
    }).width(width_label + 30);
    $('.sig-paren').width('auto');

    // first level navigation

    var buttonIds = [".naoqi", "pepper", "nao", "romeo"];
    for(id in buttonIds){
        $(id).removeClass("active");
    }
    //Aldebaran project
    if ($('.toctree-l1.current a').text().indexOf("Romeo ")==0){
        $(".romeo").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Pepper ")==0){
        $(".pepper").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("NAO ")==0){
        $(".nao").toggleClass('active');
    }
    else if($('.toctree-l1.current a').text().indexOf("NAOqi ")==0){
        $(".naoqi").toggleClass('active');
    }

    //qibuild project
    if ($('.toctree-l1.current a').text().indexOf("Welcome to qiBuild documentation !")==0){
        $(".beginner").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Advanced qibuild usage")==0){
        $(".advanced").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Hacking qiBuild")==0){
        $(".hacking").toggleClass('active');
    }

    // add "On this page", add cssClasses
    if($('.yui-g .section h1').length > 0){
        $('.yui-g .section h1:first').addClass("titleWrapper");
        $('.yui-g .section h1:first').after($("#on-this-page").html())
    }
    else if($('.yui-g .section h2').length > 0){
        $('.yui-g .section h2:first').addClass("titleWrapper");
        $('.yui-g .section h2:first').after($("#on-this-page").html())
    }
    //remove first element on this page
    if($("#on-this-page").length > 0){
        var doms = $(".yui-g .section :first").nextUntil("#toc-list");
        doms = doms.add($("#toc-list"));
        doms.wrapAll('<div class="iNavWrapper"></div>');
        $("#toc-list ul li a:first").remove()
        $("#toc-list ul:first").replaceWith($("#toc-list ul li").html())
    }
    $("#toc-list").hide();
    $("#otp-link").click(function(){
        $("#toc-list").slideToggle();
        if($("h2#otp-link").hasClass("change-before")){
            $("h2#otp-link").removeClass("change-before")
        }
        else{
            $("h2#otp-link").addClass("change-before")
        }
    });

    if($("a.current.reference.internal").length>0){
        var left = $("a.current.reference.internal").position().left-1;
        var width = $("a.current.reference.internal").width();
        var offset = 51;
        var sidebarWidth = 339;
        var right = sidebarWidth - (left + width + offset);
        if($("a.current.reference.internal").height() <= 15){
            $("a.current.reference.internal").css("white-space","nowrap");
            $("a.current.reference.internal").css({"backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        else{
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
            left = $("a.current.reference.internal").position().left-1;
            width = $("a.current.reference.internal").width();
            right = sidebarWidth - (left + width + offset);
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        $("a.current.reference.internal").parent().css("list-style-type","none");
    }

    //back to top
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700;
    //grab the "back to top" link
    var back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
        //back to top button
        ( $(this).scrollTop() > offset ) ? back_to_top.addClass('cd-is-visible') : back_to_top.removeClass('cd-is-visible cd-fade-out');
        if( $(this).scrollTop() > offset_opacity ) {
            back_to_top.addClass('cd-fade-out');
        }
    });

    //smooth scroll to top
    back_to_top.click(function(event){
        event.preventDefault();
        $('body,html').animate({
            scrollTop: 0 ,
        }, scroll_top_duration
        );
    });
    //add show source button

    //replace "go" with "search"
    $("#searchbox form input[type=submit]").val("Search")

    //trigger click on version triangle to jump to whats new
    $("#hd").click(function(e){if(e.pageX >= this.offsetWidth && e.pageY<120){$(".whatsnew")[0].click()}})
})

</script>


  </head>
  <body role="document">

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      
      <h1><a href="../../index.html">SoftBank Robotics documentation</a>
      
      
      <span><a class="whatsnew" href="../../news/index.html" >
      
          What's new in NAOqi 2.8?
      
      </a></span>
      
      </h1>
      <div id="global-nav">
        
        <a class="naoqi" title="NAOqi Developer guide" href="../../index_dev_guide.html">NAOqi</a>
        <a class="pepper" title="Pepper documentation" href="../../home_pepper.html">Pepper</a>
        <a class="nao" title="NAO documentation" href="../../home_nao.html">NAO</a>
        <a class="romeo" title="Romeo Documentation" href="../../home_romeo.html">Romeo</a>
        
        
        
        <div class="nav">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script></div>
      </div>

    </div>
    <main class="cd-container">
        <div id="bd">
          <div id="yui-main">
            <div class="yui-b">
              <div class="yui-g" id="dev-python-almath_alternatives">
                
  <div class="section" id="alternatives-to-almath-s-python-bindings">
<span id="almath-alter"></span><h1>Alternatives to ALMath&#8217;s python bindings<a class="headerlink" href="#alternatives-to-almath-s-python-bindings" title="Permalink to this headline">¶</a></h1>
<p>ALMath provides some types which are useful for kinematics computations.</p>
<p>However, equivalent functionality is now available from the
numpy and scipy.spatial python modules, which
are relevant alternatives to ALMath&#8217;s python bindings.</p>
<p>In particular, they better comply to recent python ecosystem evolutions
such as <a class="reference external" href="https://www.python.org/dev/peps/pep-0465/">PEP 465</a>.</p>
<p>This page shows how numpy and scipy.spatial modules can be used
in place of some of ALMath types.</p>
<div class="section" id="conventions">
<h2>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">almath</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy.spatial.transform</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">FRAME_WORLD</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">FakeALMotionProxy</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">getCOM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">useSensors</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">getPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="c"># x, y, z, wx, wy, wz</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">getTransform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">useSensors</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span>
<span class="gp">... </span>                <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">20.</span><span class="p">,</span>
<span class="gp">... </span>                <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">30.</span><span class="p">,</span>
<span class="gp">... </span>                <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">getRobotPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">]</span> <span class="c"># x, y, wz</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">getWorldRotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="c"># wx, wy, wz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">almotion</span> <span class="o">=</span> <span class="n">FakeALMotionProxy</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="spatial-kinematics">
<h2>Spatial kinematics<a class="headerlink" href="#spatial-kinematics" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">almath.Position3D</p>
<p>three floating-point numbers representing the position
of a point in 3 dimensional space.</p>
<p>Alternative: a (3,)-shaped numpy array.</p>
<p>Create an instance from individual coordinates:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Position3D</span><span class="p">()</span>
<span class="go">Position3D(x=0, y=0, z=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v0_al</span> <span class="o">=</span> <span class="n">almath</span><span class="o">.</span><span class="n">Position3D</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v0_al</span>
<span class="go">Position3D(x=1, y=2, z=3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">v0_al</span><span class="o">.</span><span class="n">toVector</span><span class="p">())</span>
<span class="go">[1.0, 2.0, 3.0]</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([0., 0., 0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v0_np</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v0_np</span>
<span class="go">array([1., 2., 3.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">v0_np</span><span class="p">)</span>
<span class="go">[1.0, 2.0, 3.0]</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Create an instance from a vector of coordinates, such as returned
by ALMotionProxy::getCOM:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">almotion</span><span class="o">.</span><span class="n">getCOM</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span>
<span class="go">[2.0, 0.0, 6.0]</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v1_al</span> <span class="o">=</span> <span class="n">almath</span><span class="o">.</span><span class="n">Position3D</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1_al</span>
<span class="go">Position3D(x=2, y=0, z=6)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v1_np</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1_np</span>
<span class="go">array([2., 0., 6.])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>operations</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v0_al</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">v1_al</span>
<span class="go">Position3D(x=0, y=2, z=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">v0_al</span><span class="p">,</span> <span class="n">v1_al</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v0_np</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">v1_np</span>
<span class="go">array([0., 2., 0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v0_np</span> <span class="o">-</span> <span class="n">v1_np</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">dotProduct</span><span class="p">(</span><span class="n">v0_al</span><span class="p">,</span> <span class="n">v1_al</span><span class="p">)</span>
<span class="go">20.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">crossProduct</span><span class="p">(</span><span class="n">v0_al</span><span class="p">,</span> <span class="n">v1_al</span><span class="p">)</span>
<span class="go">Position3D(x=12, y=0, z=-4)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">inner</span><span class="p">(</span><span class="n">v0_np</span><span class="p">,</span> <span class="n">v1_np</span><span class="p">)</span>
<span class="go">20.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">v0_np</span><span class="p">,</span> <span class="n">v1_np</span><span class="p">)</span>
<span class="go">array([12.,  0., -4.])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Velocity3D</p>
<p>three floating-point numbers representing the velocity
of a point in a 3 dimensional space.</p>
<p>Alternative: a (3,) shaped numpy array. See almath.Position3D above.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Velocity3D</span><span class="p">()</span>
<span class="go">Velocity3D(xd=0, yd=0, zd=0)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([0., 0., 0.])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Rotation</p>
<p>represents a rotation in euclidean space as a 3x3 (orthogonal) matrix.</p>
<p>Alternatives:</p>
<ul class="simple">
<li>a (3, 3)-shaped numpy.array.</li>
<li>a scipy.spatial.transform.Rotation</li>
</ul>
<p>Create a rotation:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Rotation</span><span class="p">()</span>
<span class="go">Rotation([1, 0, 0</span>
<span class="go">          0, 1, 0</span>
<span class="go">          0, 0, 1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r0_al</span> <span class="o">=</span> <span class="n">almath</span><span class="o">.</span><span class="n">rotationFromRotZ</span><span class="p">(</span><span class="n">almath</span><span class="o">.</span><span class="n">PI</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r0_al</span>
<span class="go">Rotation([0.707107, -0.707107, 0</span>
<span class="go">          0.707107, 0.707107, 0</span>
<span class="go">          0, 0, 1])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([[1., 0., 0.],</span>
<span class="go">       [0., 1., 0.],</span>
<span class="go">       [0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rotationFromRotZ</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>  <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span> <span class="mf">0.</span>         <span class="p">,</span>  <span class="mf">0.</span>         <span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r0_np</span> <span class="o">=</span> <span class="n">rotationFromRotZ</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r0_np</span>
<span class="go">array([[ 0.70710678, -0.70710678,  0.        ],</span>
<span class="go">       [ 0.70710678,  0.70710678,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> 
<span class="go">&lt;scipy.spatial.transform.rotation.Rotation object at ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span>
<span class="go">array([[1., 0., 0.],</span>
<span class="go">       [0., 1., 0.],</span>
<span class="go">       [0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r0_sp</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">([</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r0_sp</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span>
<span class="go">array([[ 1.        ,  0.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.70710678, -0.70710678],</span>
<span class="go">       [ 0.        ,  0.70710678,  0.70710678]])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Apply a rotation to a point or a vector:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">r0_al</span> <span class="o">*</span> <span class="n">almath</span><span class="o">.</span><span class="n">Position3D</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="go">Position3D(x=-7.07107, y=21.2132, z=30)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">r0_np</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]))</span>
<span class="go">array([-7.07106781, 21.21320344, 30.        ])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">r0_sp</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]))</span>
<span class="go">array([10.        , -7.07106781, 35.35533906])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">r0_sp</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]))</span>
<span class="go">array([10.        , -7.07106781, 35.35533906])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Transform</p>
<p>represents a rigid displacement in euclidean space as a 4x4 homogeneous
matrix.</p>
<p>Alternative: a (4, 4)-shaped numpy array.</p>
<p>Create an homogenous matrix:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Transform</span><span class="p">()</span>
<span class="go">Transform([1, 0, 0, 0</span>
<span class="go">           0, 1, 0, 0</span>
<span class="go">           0, 0, 1, 0])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 0.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tr0_al</span> <span class="o">=</span> <span class="n">almath</span><span class="o">.</span><span class="n">transformFromRotZ</span><span class="p">(</span><span class="n">almath</span><span class="o">.</span><span class="n">PI</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr0_al</span>
<span class="go">Transform([0.707107, -0.707107, 0, 0</span>
<span class="go">           0.707107, 0.707107, 0, 0</span>
<span class="go">           0, 0, 1, 0])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">transformFromRotation</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">ret</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">ret</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">ret</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr0_np</span> <span class="o">=</span> <span class="n">transformFromRotation</span><span class="p">(</span><span class="n">rotationFromRotZ</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr0_np</span>
<span class="go">array([[ 0.70710678, -0.70710678,  0.        ,  0.        ],</span>
<span class="go">       [ 0.70710678,  0.70710678,  0.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  1.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">xy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_al</span> <span class="o">=</span> <span class="n">almath</span><span class="o">.</span><span class="n">transformFromPosition</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span> <span class="mf">3.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_al</span>
<span class="go">Transform([1, 0, 0, 1.41421</span>
<span class="go">           0, 1, 0, 1.41421</span>
<span class="go">           0, 0, 1, 3])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">transformFromPosition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">x</span>  <span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">y</span>  <span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">z</span>  <span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span> <span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_np</span> <span class="o">=</span> <span class="n">transformFromPosition</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span> <span class="mf">3.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_np</span>
<span class="go">array([[1.        , 0.        , 0.        , 1.41421356],</span>
<span class="go">       [0.        , 1.        , 0.        , 1.41421356],</span>
<span class="go">       [0.        , 0.        , 1.        , 3.        ],</span>
<span class="go">       [0.        , 0.        , 0.        , 1.        ]])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Extract the translation part:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">position3DFromTransform</span><span class="p">(</span><span class="n">tr1_al</span><span class="p">)</span>
<span class="go">Position3D(x=1.41421, y=1.41421, z=3)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_np</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="go">array([1.41421356, 1.41421356, 3.        ])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Extract the rotation part:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">rotationFromTransform</span><span class="p">(</span><span class="n">tr1_al</span><span class="p">)</span>
<span class="go">Rotation([1, 0, 0</span>
<span class="go">          0, 1, 0</span>
<span class="go">          0, 0, 1])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_np</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">array([[1., 0., 0.],</span>
<span class="go">       [0., 1., 0.],</span>
<span class="go">       [0., 0., 1.]])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Serialize as a list of elements (row major):</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">tr1_al</span><span class="o">.</span><span class="n">toVector</span><span class="p">())</span>
<span class="go">[1.0, 0.0, 0.0, 1.4142135381698608, 0.0, 1.0, 0.0, 1.4142135381698608, 0.0, 0.0, 1.0, 3.0, 0.0, 0.0, 0.0, 1.0]</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">tr1_np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>
<span class="go">[1.0, 0.0, 0.0, 1.4142135623730951, 0.0, 1.0, 0.0, 1.4142135623730951, 0.0, 0.0, 1.0, 3.0, 0.0, 0.0, 0.0, 1.0]</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Deserialize from a list of elements (row major), as returned by ALMotion&#8217;s getTransform:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">almotion</span><span class="o">.</span><span class="n">getTransform</span><span class="p">(</span><span class="s">&quot;Head&quot;</span><span class="p">,</span> <span class="n">FRAME_WORLD</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
<span class="go">Transform([1, 0, 0, 10</span>
<span class="go">           0, 1, 0, 20</span>
<span class="go">           0, 0, 1, 30])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">almotion</span><span class="o">.</span><span class="n">getTransform</span><span class="p">(</span><span class="s">&quot;Head&quot;</span><span class="p">,</span> <span class="n">FRAME_WORLD</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">array([[ 1.,  0.,  0., 10.],</span>
<span class="go">       [ 0.,  1.,  0., 20.],</span>
<span class="go">       [ 0.,  0.,  1., 30.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>apply displacement to a point using matrix multiplication:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_al</span> <span class="o">*</span> <span class="n">almath</span><span class="o">.</span><span class="n">Position3D</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="go">Position3D(x=11.4142, y=21.4142, z=33)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">tr1_np</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">array([11.41421356, 21.41421356, 33.        ])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>compose displacements with matrix multiplication and matrix inverse:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tr0_al</span> <span class="o">*</span> <span class="n">tr1_al</span>
<span class="go">Transform([0.707107, -0.707107, 0, 0</span>
<span class="go">           0.707107, 0.707107, 0, 2</span>
<span class="go">           0, 0, 1, 3])</span>


<span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">transformInverse</span><span class="p">(</span><span class="n">tr0_al</span><span class="p">)</span>
<span class="go">Transform([0.707107, 0.707107, 0, -0</span>
<span class="go">           -0.707107, 0.707107, 0, -0</span>
<span class="go">           0, 0, 1, -0])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">tr0_np</span><span class="p">,</span> <span class="n">tr1_np</span><span class="p">)</span> 
<span class="go">array([[ 7.07106781e-01, -7.07106781e-01,  0.00000000e+00, 2.22044605e-16],</span>
<span class="go">       [ 7.07106781e-01,  7.07106781e-01,  0.00000000e+00, 2.00000000e+00],</span>
<span class="go">       [ 0.00000000e+00,  0.00000000e+00,  1.00000000e+00, 3.00000000e+00],</span>
<span class="go">       [ 0.00000000e+00,  0.00000000e+00,  0.00000000e+00, 1.00000000e+00]])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">tr0_np</span><span class="p">)</span>
<span class="go">array([[ 0.70710678,  0.70710678,  0.        ,  0.        ],</span>
<span class="go">       [-0.70710678,  0.70710678,  0.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  1.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Quaternion</p>
<p>represents a rotation in euclidean space as a unit quaternion.</p>
<p>Alternative: a scipy.spatial.transform.Rotation</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Quaternion</span><span class="p">()</span>
<span class="go">Quaternion(w=1, x=0, y=0, z=0)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">as_quat</span><span class="p">()</span> <span class="c"># quaternion in scalar-last (x, y, z, w) format</span>
<span class="go">array([0., 0., 0., 1.])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Rotation3D</p>
<p>a set of Euler angles, used to represent a rotation in euclidean space.</p>
<p>Euler angles usage is discouraged.</p>
<p>Alternative: scipy.spatial.transform.Rotation, which supports Euler angles
conversion.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Rotation3D</span><span class="p">()</span>
<span class="go">Rotation3D(wx=0, wy=0, wz=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">quaternionFromRotation3D</span><span class="p">(</span><span class="n">almath</span><span class="o">.</span><span class="n">Rotation3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="go">Quaternion(w=0.435953, x=-0.718287, y=0.310622, z=0.444435)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">rotationFromTransform</span><span class="p">(</span><span class="n">almath</span><span class="o">.</span><span class="n">transformFromRotation3D</span><span class="p">(</span><span class="n">almath</span><span class="o">.</span><span class="n">Rotation3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)))</span>
<span class="go">Rotation([0.411982, -0.833738, -0.36763</span>
<span class="go">          -0.0587266, -0.426918, 0.902382</span>
<span class="go">          -0.909297, -0.350175, -0.224845])</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_euler</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">as_quat</span><span class="p">()</span> <span class="c"># quaternion in scalar-last (x, y, z, w) format</span>
<span class="go">array([-0.71828702,  0.31062245,  0.44443511,  0.43595284])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span>
<span class="go">array([[ 0.41198225, -0.83373765, -0.36763046],</span>
<span class="go">       [-0.05872664, -0.42691762,  0.90238159],</span>
<span class="go">       [-0.90929743, -0.35017549, -0.2248451 ]])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Position6D</p>
<p>a set of Euler angles and translations, used to represent a pose in
euclidean space.</p>
<p>Euler angles usage is discouraged.
Alternative: none.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Position6D</span><span class="p">()</span>
<span class="go">Position6D(x=0, y=0, z=0, wx=0, wy=0, wz=0)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="planar-kinematics">
<h2>Planar kinematics<a class="headerlink" href="#planar-kinematics" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">almath.Position2D</p>
<p>two floating-point numbers representing the position
of a point in 2 dimensional space (the XY plane)</p>
<p>Alternative: a (2,) shaped numpy array.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">Position2D</span><span class="p">()</span>
<span class="go">Position2D(x=0, y=0)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">position2DFromTransform</span><span class="p">(</span><span class="n">tr1_al</span><span class="p">)</span>
<span class="go">Position2D(x=1.41421, y=1.41421)</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">2</span><span class="p">])</span>
<span class="go">array([0., 0.])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tr1_np</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="go">array([1.41421356, 1.41421356])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">almath.Pose2D</p>
<p>three floating-point numbers representing a pose
in 2 dimensional space (the XY plane), as a translation
in XY and a rotation along Z.</p>
<p>Usage of planar transforms is discouraged. For most computations, using
spatial geometry is easier and less error-prone.</p>
<p>Whenever a given spatial rotation is along the Z-axis, its angle can
be computed</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">almath</span><span class="o">.</span><span class="n">pose2DFromTransform</span><span class="p">(</span><span class="n">tr0_al</span><span class="p">)</span><span class="o">.</span><span class="n">theta</span>
<span class="go">0.7853981852531433</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">tr0_np</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">tr0_np</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">0.7853981633974483</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">scipy</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">from_dcm</span><span class="p">(</span><span class="n">tr0_np</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">as_rotvec</span><span class="p">()</span>
<span class="go">array([0.        , 0.        , 0.78539816])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>


              </div>
            </div>
          </div>
          
            
              <div class="yui-b" id="sidebar">
                
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">What&#8217;s new</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index_dev_guide.html">NAOqi - Developer guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/creating_applications/index.html">Creating an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ref/life/index.html">Programming for a living robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index_tuto.html">Other tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software/choregraphe/index.html">Choregraphe Suite</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../programming_index.html">SDKs</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Python SDK</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="intro_python.html">Python SDK - Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="install_guide.html">Python SDK - Installation Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ref/python-api.html">NAOqi Python - API</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="">Alternatives to ALMath&#8217;s python bindings</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cpp/index.html">C++ SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../js/index.html">JavaScript SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ros/index_ros.html">ROS Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../deprecated_sdks.html">Former Versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../naoqi/index.html">NAOqi APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libqi/index.html">qi Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ref/index.html">Former NAOqi Framework</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../home_nao.html"><strong>NAO</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home_pepper.html"><strong>Pepper</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home_romeo.html"><strong>Romeo</strong> - Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../legal/notice.html">Legal notices</a></li>
</ul>

    <div id="on-this-page" style="display:none;">
        <h2 id="otp-link">On this page</h2>
        <div id="toc-list">
            <ul>
<li><a class="reference internal" href="#">Alternatives to ALMath&#8217;s python bindings</a><ul>
<li><a class="reference internal" href="#conventions">Conventions</a></li>
<li><a class="reference internal" href="#spatial-kinematics">Spatial kinematics</a></li>
<li><a class="reference internal" href="#planar-kinematics">Planar kinematics</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
        </div>
      </div>
              </div>
            
          
        </div>
    </main>
    <a href="#0" class="cd-top"></a>
    <div id="ft">
      
      <a title="Glossary" href="../../glossary.html">Glossary</a>
      <a title="Site map" href="../../contents.html">Site map</a>
      <a title="Index" href="../../genindex.html">Index</a>
      <a title="Support" target="_blank" href="https://account.aldebaran.com/support/">Support</a>
      <a title="Contact" target="_blank" href="https://www.aldebaran.com/en/contact">Contact</a>
      <a title="Legal Notices" href="../../legal/notice.html">Legal Notices</a>
      
      
      <img src="https://www.ald.softbankrobotics.com/sites/aldebaran/files/logos-picture/2016_digital_logo_sbr_112x31_0.png" alt="">
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>